## Сдвиг и вращение MASM

### shl - сдвиг влево
сдвигает биты в регистре или переменной влево на count разрядов
```
shl dest, count
```
count должен быть меньше числа битов. 

Также count может быть регистром CL.

Этот сдвиг аналогичен операции << побитового сдвига С++.

При сдвиге влево последний отбрасываемый бит копируется в регистр флагов во флаг переноса CF.
```
.code
main proc
    mov al, 69      ; в AL число 69 или 01000101
    shl al, 2      ; сдвигаем число в AL на 2 разряда влево = 01000101 << 2 = 00010100 = 20
    jc carry_set   ; при сдвиге отброшены 2 левых бита - 01 - флаг CF установлен
    mov eax, 0
    ret
carry_set:
    mov eax, 1
    ret
main endp
end
```
Здесь мы сдвигаем на 2 влево, тем самым флаг переноса = 1. И при помощи jc мы проверяем установку флага - переходим к метке carry_set.

Кроме флага CF инструкция сдвига также устанавливает и другие флаги состояния. Флаг нуля ZF устанавливается, если в результате сдвига получилось число 0. Флаг знака устанавливается, если старший бит результата равен 1. Флаг переполнения OF устанавливается, если при сдвиге на 1 разряд меняется старший бит (с 0 на 1 или с 1 на 0).

### shr - логический сдвиг вправо
аналогичен >> побитового сдвига в с++. Аналогично меняются флаги в регистре флагов. 

Сдвиг вправо на n разрядов беззнаковых чисел эквивалентен делению числа на 2^n

### sar - арифметический сдвиг вправо
Аналогичен shr, но сдвигаемое число слево заполняется не нулями, а значением старшено бита. Это позволяет сохранить знаковый бит. 

### rol ror - повороты влево и вправо
Смещенные биты помещаются в другой конец. 

Там также куча изменений в регистре флагов...

### rcl и rcr - вращение с использованием флага переноса
смещаемый бит переходит во флаг переноса, а бит из флага переходит в другой конец числа.

PS. в начале программы флаг переноса не установлен. 

```
mov al, 131 ; 10000011
rcl al, 2 ; 00001101
```
здесь мы вращаем 10000011 на 2 влево.

При смещении первого бита в конец пишем 0, так как он из флага переноса. В флаг переноса пишем 1.

10000011 -> 00000110

далее сдвигаем второй бит, а в конец пишем единицу из флага переноса. Флаг переноса ставим в 0.

00000110 -> 00001101

### итого есть 8 операций: shl, shr, sal, sar, rol, ror, rcl, rcr

